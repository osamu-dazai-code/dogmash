<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>DogMash - ¬øQu√© perrito es m√°s lindo?</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; margin: 0; padding: 20px; text-align: center; }
    h1 { color: #333; }
    .container { display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap; }
    .dog-card { background: white; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); padding: 10px; width: 250px; }
    .dog-card img { width: 100%; height: 200px; object-fit: cover; border-radius: 10px; }
    button { margin-top: 10px; padding: 8px 12px; border: none; border-radius: 6px; background: #007bff; color: white; cursor: pointer; }
    button:hover { background: #0056b3; }
    #ranking { margin-top: 30px; text-align: left; max-width: 600px; margin-left: auto; margin-right: auto; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 8px; border-bottom: 1px solid #ddd; }
    th { background: #eee; }
  </style>
</head>
<body>
  <h1>üê∂ DogMash üê∂</h1>
  <p>Elige qu√© perrito es m√°s lindo:</p>

  <div class="container" id="dogContainer"></div>

  <h2>üèÜ Ranking</h2>
  <div id="ranking"></div>

  <script>
    const dogs = [
      { id: "luna", name: "Luna", img: "https://images.unsplash.com/photo-1548199973-03cce0bbc87b?q=80&w=600", rating: 1000, wins: 0, losses: 0 },
      { id: "max", name: "Max", img: "https://images.unsplash.com/photo-1552053831-71594a27632d?q=80&w=600", rating: 1000, wins: 0, losses: 0 },
      { id: "kira", name: "Kira", img: "https://images.unsplash.com/photo-1507146426996-ef05306b995a?q=80&w=600", rating: 1000, wins: 0, losses: 0 },
      { id: "rocky", name: "Rocky", img: "https://images.unsplash.com/photo-1543466835-00a7907e9de1?q=80&w=600", rating: 1000, wins: 0, losses: 0 },
    ];

    function expectedScore(rA, rB) {
      return 1 / (1 + Math.pow(10, (rB - rA) / 400));
    }

    function elo(rA, rB, scoreA, k = 24) {
      const ea = expectedScore(rA, rB);
      const eb = expectedScore(rB, rA);
      return [
        Math.round(rA + k * (scoreA - ea)),
        Math.round(rB + k * ((1 - scoreA) - eb)),
      ];
    }

    function renderDogs() {
      const container = document.getElementById("dogContainer");
      container.innerHTML = "";
      const [i, j] = pickTwo();
      [dogs[i], dogs[j]].forEach((dog, idx) => {
        const card = document.createElement("div");
        card.className = "dog-card";
        card.innerHTML = `
          <h3>${dog.name}</h3>
          <img src="${dog.img}" alt="${dog.name}">
          <p>Elo: ${dog.rating}</p>
          <button onclick="vote(${i},${j},${idx === 0 ? i : j})">Votar</button>
        `;
        container.appendChild(card);
      });
    }

    function pickTwo() {
      let i = Math.floor(Math.random() * dogs.length);
      let j = Math.floor(Math.random() * dogs.length);
      while (j === i) j = Math.floor(Math.random() * dogs.length);
      return [i, j];
    }

    function vote(i, j, winnerIdx) {
      const loserIdx = winnerIdx === i ? j : i;
      const [newWinner, newLoser] = elo(dogs[winnerIdx].rating, dogs[loserIdx].rating, 1);
      dogs[winnerIdx].rating = newWinner;
      dogs[winnerIdx].wins++;
      dogs[loserIdx].rating = newLoser;
      dogs[loserIdx].losses++;
      renderDogs();
      renderRanking();
    }

    function renderRanking() {
      const rankingDiv = document.getElementById("ranking");
      const sorted = [...dogs].sort((a, b) => b.rating - a.rating);
      let html = `<table><tr><th>#</th><th>Nombre</th><th>Elo</th><th>Wins</th><th>Losses</th></tr>`;
      sorted.forEach((d, idx) => {
        html += `<tr><td>${idx + 1}</td><td>${d.name}</td><td>${d.rating}</td><td>${d.wins}</td><td>${d.losses}</td></tr>`;
      });
      html += `</table>`;
      rankingDiv.innerHTML = html;
    }

    renderDogs();
    renderRanking();
  </script>
</body>
</html>

